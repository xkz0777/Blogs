---
title: Vim 学习笔记
date: 2021-08-31 12:04:15
tags: Vim
categories: Linux
img: /medias/featureimages/linux_vim.jpg
author: xkz
summary: Vim 学习笔记
---

# Vim

## 基本介绍

Linux 系统都会内置 vi 编辑器，而 vim 是 vi 的增强版本，不仅可以运行在 Unix 系统上，还可以运行在 Windows、Mac OS 上；同时 vim 还有代码高亮、编译及错误跳转等功能。

## 一般模式

通过 `vim <file>`  命令即可用 Vim 打开文件，**进入时的模式为一般模式**，在一般模式中，可以移动光标或者使用复制、粘贴、撤销操作，还可以删除字符或者删除整行。

**在一般模式下，按 `i` 在光标的前边进入编辑模式**，编辑模式下按 `ESC` 回到一般模式，插入模式下，输入是在**光标所在位置**的，光标之后的会依次向右移。

其他进入编辑模式的方式：

I（Insert）：在行首进入编辑模式

a：在光标后边进入编辑模式

A（Append）：在行末进入编辑模式

**在一般模式下，按 `:` 进入命令行模式**，可以输入相关指令，命令行模式下按 `ESC` 回到一般模式。在命令行模式下，输入 `help` 可以查看 Vim 的帮助文档。

## 用 Vim 打开多个文件

### 显示屏显示一个文件

```
vim file1 file2
```

显示屏默认显示第一个文件也就是 file1，切换到命令行模式，输入 `ls` ，屏幕上会出现打开的所有文件的序号和文件名，我们继续输入冒号 `:` ，然后输入 bn (其中 n 为文件序号，如 b2 代表切换到第二个文件)。

### 显示屏从左到右显示多个文件

```bash
vim -On file1 file2 ... filen
```

### 显示屏从上到下显示多个文件

```bash
vim -on file1 file2 ... filen
```

显示多个文件时，切换当前编辑文件的方式和单个文件相同，使用 `:bn` 的形式，切换到不同屏幕，则使用 `Ctrl + ww `，如果要切换到左边的屏幕，使用 `Ctrl + wh`，切换到右边使用 `Ctrl + wl`。

## Vim 分屏

```bash
:split
```

上下分屏，每个屏幕可以用 `:q` 退出，切换屏幕与之前相同。

```bash
:vsplit
```

左右分屏

### 一般模式下的命令

移动光标：h：左，j：下，k：上，l：右。

x：删除光标所在处的字符。

r+新字符：将光标处的字符替换为新字符。

w：移至下一个单词的词首。

nw：移动 n 个单词。

e：跳至当前或下一个单词的词尾。

b：跳至当前或前一个单词的词首。

u：撤销。

nu：撤销 n 次操作。

d+n+左右：向左/右剪切 n 个字符。

dd：剪切当前所在行。

ndd：向下剪切 n 行。

y+n+左右：向左/右复制 n 个字符。

yy：复制整行。

nyy：向下复制 n 行。

gg：跳转到首行第一个字符

G：跳转到末行第一个字符

nG：跳转到第 n 行第一个字符

c：**重复删除多个数据并进入编辑模式**。例如：10cj 向下删除 10 行，并进入编辑模式，c2w 向后删除两个单词并进入编辑模式，ci" 删除引号内的所有内容并进入编辑模式（如果用 di"则只会删除内容，不会进入编辑模式）。

0：回到行首。

f+字符：查找字符，并使得光标跳转到该字符，可以配合其他命令使用，例如 df+字符 删除光标与字符之间（含）的所有字符。

/：查找字符和单词。

## Vim 执行 Linux 命令

格式如下：

```
:!command
```

例如：

```
:!date
```

执行 date 命令显示时间。

```bash
set nonu
```

不显示行号

**执行完命令以后按下键盘上的 `Enter` 就会返回到文件。**

## 可视模式

### 一般可视模式

输入 v 进入一般可视模式，在该模式下，可以使用鼠标选中文本，并使用一般模式下的命令，例如选中一段文本，点击 d，会将这段文本剪切。

### 可视行模式

输入 V 进入可视行模式，此时选中的文本以行作单位，一行一行来选中，同样可以执行一般模式下的命令，此外，此时输入 `:` 后，输入`normal 指令` 可以对这些行进行一些批量处理，例如：

`:normal Ihello` 会在每行前都插入 `hello`。`:normal Ahello` 会在每行末插入 `hello`。

### 可视块模式

输入 Ctrl + v 进入可视块模式，此时类似于 vsCode 下 Alt + Shift + 鼠标的效果，可以实现块操作。

## Vim 的退出

`:w`，保存当前对文件的修改，但是不退出文件。

`:w!`，强制保存但是不退出文件。

`:w file`，保存当前的文件修改到 file 文件当中。

`:q!` 退出文件，对文件的修改不做保存。

`:qa!`，退出所有的文件，对所有的文件修改都不做保存。

`:wq`，退出文件并保存对文件的修改。

`:x`，退出文件并保存对文件的修改。

以上的命令都是在命令行模式下的操作，也可以在一般模式下，输入 `ZZ`（都是大写）即可保存并推出。

## Vim 自定义配置

在用户的根目录（~）下新建 `.vim` 文件夹，并在其中创建 `vimrc` 文件，即可开始设置配置。常见配置项可以看这篇文章 [Vim 配置入门 - 阮一峰的网络日志](https://www.ruanyifeng.com/blog/2018/09/vimrc.html)。

### 自定义按键效果

`noremap a h` 可以使得按 a 键实现向左的效果。

`map s :w<CR>` 可以使得按 s 键保存。

`map r :source $MYVIMRC<CR> `可以使得按 r 键刷新。

### 前缀键

[VIM学习笔记 前缀键(leader) - 知乎 (zhihu.com)](https://zhuanlan.zhihu.com/p/63626180)
